<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles/css/style.css">  
  <title>geography</title>
  <script>
      window.onload = function() {
          let element = document.createElement("script");
          element.src = "../scripts/before/main.js";
          document.body.appendChild(element);
          loaderbox.hidden = true;  
          startCanvas(); 
      };  
  </script>
</head>

<body>
    <div class="wrapsite">

        <header>
                <div class="animate-text-box"> 
                        <div class="hidden-transform-area left-top-cube"></div>
                        <div class="hidden-transform-area right-top-cube"></div>
                        <div class="hidden-transform-area right-bottom-cube"></div>
                        <div class="hidden-transform-area left-bottom-cube"></div>
                        
                        <div class="main-title">
                            <img src="../img/bkg/cz-map-city.png" alt="" class="css-card">
                        </div>
                      </div >
     <button class="down-arrow" id="arrow-scrol-down">&#9650;</button>  
    </header> 
    
    <nav class="menu" id="navbox">
      <a class="flag-link" href="#"><img src="../img/bkg/czech-republic-flag640.png" class="flag-menu"></a>
        <div class="dropdownBackground">
          <span class="arrow"></span>
        </div>

        <ul class="submenu-box" id="menu-list">
          <li>
            <a href="">Geography</a>
            <div class="dropdown">
              <h4>Metropolises</h4>
              <a href="#">Prague</a>
              <a href="#">Brno</a>
              <a href="#">Link 3</a>
          <a href="#">Link 4</a>
            </div>
          </li>
          <li>
            <a href="">History</a>
            <div class="dropdown">
              <h4>Metropolises</h4>
              <a href="#">Prague</a>
              <a href="#">Brno</a>
              <a href="#">Link 3</a>
          <a href="#">Link 4</a>
            </div>
          </li>
          <li>
            <a href="">Citys</a>
            <div class="dropdown">
              <h4>Metropolises</h4>
              <a href="#">Prague</a>
              <a href="#">Brno</a>
              <a href="#">Link 3</a>
          <a href="#">Link 4</a>
            </div>
          </li>
          <li>
            <a href="">Nature</a>
            <div class="dropdown">
              <h4>Metropolises</h4>
              <a href="#">Prague</a>
              <a href="#">Brno</a>
              <a href="#">Link 3</a>
          <a href="#">Link 4</a>
            </div>
          </li>
          <li>
            <a href="">Government</a>
            <div class="dropdown">
              <h4>Metropolises</h4>
              <a href="#">Prague</a>
              <a href="#">Brno</a>
              <a href="#">Link 3</a>
          <a href="#">Link 4</a>
            </div>
          </li>
        </ul>
      </nav>      

<div class="basic-slider">
        <div class="basic-slide basic-active"><img src="../img/cont/28.jpg" alt="" class="basic-pic"><span class="basic-caption">123</span></div>
        <div class="basic-slide"><img src="../img/cont/29.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/37.jpg" alt="" class="basic-pic"><span class="basic-caption">789</span></div>
        <div class="basic-slide"><img src="../img/cont/30.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/35.jpg" alt="" class="basic-pic"><span class="basic-caption">789</span></div>
        <div class="basic-slide"><img src="../img/cont/31.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/39.jpg" alt="" class="basic-pic"><span class="basic-caption">789</span></div>
        <div class="basic-slide"><img src="../img/cont/32.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/40.jpg" alt="" class="basic-pic"><span class="basic-caption">789</span></div>
        <div class="basic-slide"><img src="../img/cont/33.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/41.jpg" alt="" class="basic-pic"><span class="basic-caption">789</span></div>
        <div class="basic-slide"><img src="../img/cont/34.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/42.jpg" alt="" class="basic-pic"><span class="basic-caption">789</span></div>
        <div class="basic-slide"><img src="../img/cont/35.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <div class="basic-slide"><img src="../img/cont/36.jpg" alt="" class="basic-pic"><span class="basic-caption">456</span></div>
        <button class="basic-previous">previous</button>
        <button class="basic-next">next</button>
</div> 

<canvas class="picture-pan"></canvas>

  <figure>
    <img class="contentimg align-left slide-in"  id="pic" src="../img/cont/vysehrad.jpg" alt="">
    <figcaption>Vysehrad</figcaption>
  </figure>

  <h3>Geography</h3>

  <canvas class="glitch-art"></canvas>

  <h3>Stats</h3>   


  <figure>
    <img class="contentimg align-left slide-in"  id="pic" src="../img/cont/buchlov-louky.jpg" alt="">
    <figcaption>Chriby</figcaption>
  </figure>


        <p class="hidden">
    It is a developed country[14] with an advanced,[15] high income[16] export-oriented social market economy based in services, manufacturing and innovation. The UNDP ranks the country 14th in inequality-adjusted human development.[17] The Czech Republic is a welfare state with a "continental" European social model, a universal health care system and tuition-free university education. It ranks as the 6th safest or most peaceful country and is one of the most non-religious countries in the world,[18] while achieving strong performance in democratic governance.</p>
   
    <div class="perspective-wrap">
      <div class="perspective-frame">
        <div class="perspective-card"><img class="perspective-img" src="../img/cont/jizeramountainspan.jpg"/></div>
      </div>
      </div>    
  
  <h3>History</h3>

  <figure>
    <img class="contentimg align-right slide-in"  id="pic" src="../img/cont/mahenovo-divadlo-brno.jpg" alt="">
    <figcaption>Mahen Theatre</figcaption>
  </figure>

    <p class="hidden">
    The Czech Republic includes the historical territories of Bohemia,[19] Moravia, and Czech Silesia. The Czech state was formed in the late 9th century as the Duchy of Bohemia under the Great Moravian Empire. After the fall of the Empire in 907, the centre of power transferred from Moravia to Bohemia under the Přemyslid dynasty. In 1002, the duchy was formally recognized as part of the Holy Roman Empire,[20][21] becoming the Kingdom of Bohemia in 1198 and reaching its greatest territorial extent in the 14th century. Besides Bohemia itself, the king of Bohemia ruled the lands of the Bohemian Crown, he had a vote in the election of the Holy Roman Emperor, and Prague was the imperial seat in periods between the 14th and 17th century. In the Hussite wars of the 15th century driven by the Protestant Bohemian Reformation, the kingdom faced economic embargoes and defeated five consecutive crusades proclaimed by the leaders of the Catholic Church.</p>

    <div class="tilted-wrap">
 
      <div class="tilted-pics grid-box">
        <div class="tilted-part"><img class="tilted-pic" src="../img/cont/61.jpg"></div>    
        <div class="tilted-part"><img class="tilted-pic" src="../img/cont/92.jpg"></div>    
        <div class="tilted-part"><img class="tilted-pic" src="../img/cont/94.jpg"></div>        
      </div>
      
      <div class="tilted-grid1 grid-box">
        <div class="tilted-part"><p class="tilt-text">A tortoise. What's that?</p></div>
        <div class="tilted-part"><p class="tilt-text">Of course.</p></div>
        <div class="tilted-part"><p class="tilt-text">I never seen a turtle.</p></div>
      </div>
      
      <div class="tilted-grid2 grid-box">
          <div class="tilted-part"><p class="tilt-text">CSS Gridexperiment in three planes</p></div>
        <div class="tilted-part"><p class="tilt-text">Don't move.</p></div>
        <div class="tilted-part"><p class="tilt-text">Reaction time is a factor in this so please pay attention. Answer as quickly as you can.</p></div>
      </div>
      
    </div>  
    <figure>
      <img class="contentimg align-right slide-in"  id="pic" src="../img/cont/corner-flag.jpg" alt="">
      <figcaption>Vysehrad</figcaption>
    </figure>
          
    <p class="hidden">
    Czechoslovakia remained the only democracy in this part of Europe in the interwar period.[22] However, the Czech part of Czechoslovakia was occupied by Germany in World War II, while the Slovak region became the Slovak Republic; Czechoslovakia was liberated in 1945 by the armies of the Soviet Union and the United States. The Czech country lost the majority of its German-speaking inhabitants after they were expelled following the war. The Communist Party of Czechoslovakia won the 1946 elections and after the 1948 coup d'état, Czechoslovakia became a one-party communist state under Soviet influence. In 1968, increasing dissatisfaction with the regime culminated in a reform movement known as the Prague Spring, which ended in a Soviet-led invasion. Czechoslovakia remained occupied until the 1989 Velvet Revolution, when the communist regime collapsed and market economy was reintroduced. On 1 January 1993, Czechoslovakia peacefully dissolved, with its constituent states becoming the independent states of the Czech Republic and Slovakia. The Czech Republic joined NATO in 1999 and the EU in 2004.</p>  
  
    <div class="css-carrusel">
        <figure class="only-css-slider">
            <figure class="css-slide">
                <img src="../img/cont/123.jpg" alt>
                <figcaption>Hobbiton, New Zealand</figcaption>
            </figure>
            <figure class="css-slide">
                <img src="../img/cont/129.jpg" alt>
                <figcaption>Wanaka, New Zealand</figcaption>
            </figure>
            <figure class="css-slide">
          <img src="../img/cont/132.jpg" alt>
                <figcaption>Utah, United States</figcaption>
            </figure>
            <figure class="css-slide">
                <img src="../img/cont/125.jpg" alt>
                <figcaption>Bryce Canyon, Utah, United States</figcaption>
            </figure>
            <figure class="css-slide">
                <img src="../img/cont/112.jpg" alt>
                <figcaption>Hobbiton, New Zealand</figcaption>
            </figure>
        </figure>
    </div>

<footer>
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2058314.3021129183!2d13.57809096500988!3d49.91064209129525!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x470b948fd7dd8243%3A0xf8661c75d3db586f!2sCzechia!5e0!3m2!1sen!2scz!4v1526812826093"></iframe>
    <a href="http://www.checkczechia.cz/"><img src="../img/lgo/mapxflag.png" alt="map"></a>
    <a href="https://www.tripadvisor.com/Tourism-g274684-Czech_Republic-Vacations.html">tripadvisor.com</a>
    
</footer> 

    </div>  

    <div class="loader" id="loaderbox" >
      <div class="loader-inner">
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
      </div>
    </div>    

    <button class="toTop" id="tiptop">&#9650;</button>

        <a class="toggle" href="#example" id="burger">☰</a>
      <div class="toggle-content" id="example">
<ul class="mobile-menu">
<li class="sub-list"> <h4>Geography</h4>
<ul class="sub-mobil-menu">
   <li><a href="">Czech republic1</a></li>
    <li><a href="">Czech republic2</a></li>
    <li><a href="">Czech republic3</a></li>
    <li><a href="">Czech republic4</a></li>
    <li><a href="">Czech republic5</a></li>    
</ul>
</li>  

<li class="sub-list"> <h4>History</h4>
    <ul class="sub-mobil-menu">
       <li><a href="">Czech republic1</a></li>
        <li><a href="">Czech republic2</a></li>
        <li><a href="">Czech republic3</a></li>
        <li><a href="">Czech republic4</a></li>
        <li><a href="">Czech republic5</a></li>    
    </ul>
    </li> 

<li class="sub-list"> <h4>Government</h4>
        <ul class="sub-mobil-menu">
           <li><a href="">Czech republic1</a></li>
            <li><a href="">Czech republic2</a></li>
            <li><a href="">Czech republic3</a></li>
            <li><a href="">Czech republic4</a></li>
            <li><a href="">Czech republic5</a></li>    
        </ul>
        </li> 

<li class="sub-list"> <h4>Travel</h4>
            <ul class="sub-mobil-menu">
               <li><a href="">Czech republic1</a></li>
                <li><a href="">Czech republic2</a></li>
                <li><a href="">Czech republic3</a></li>
                <li><a href="">Czech republic4</a></li>
                <li><a href="">Czech republic5</a></li>    
            </ul>
            </li> 
 
</ul>
      </div>

      <script>
/*basic slider*/

var previous = document.querySelector(".basic-previous");
var next = document.querySelector(".basic-next");
var slides = document.querySelectorAll(".basic-slide");
var current = 0;

// Code that moves to the next slide
next.addEventListener("click", function () {
  slides[current].classList.remove("basic-active");
  current ++;
  if (current === slides.length)
    current = 0;
  slides[current].classList.add("basic-active");
});

// Code that moves to the previous slide
previous.addEventListener("click", function () {
  slides[current].classList.remove("basic-active");
  current --;
  if (current < 0)
    current = (slides.length - 1);
  slides[current].classList.add("basic-active");
});

/*zoom image canvas*/

let picturePan = document.querySelector('.picture-pan');   
let computedPan = getComputedStyle(picturePan);   
let canvasHeight = parseFloat(computedPan.height); 
let canvasWidth = parseFloat(computedPan.width);    
    
	picturePan.width = canvasWidth;
picturePan.height = canvasHeight;

	let panImage = new Image;

function startCanvas(){		
    
		    let ctx = picturePan.getContext('2d');
		    trackTransforms(ctx);
		  
    function redraw(){

          // Clear the entire canvas
          let p1 = ctx.transformedPoint(0,0);
          let p2 = ctx.transformedPoint(picturePan.width,picturePan.height);
          ctx.clearRect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y);

          ctx.save();
          ctx.setTransform(1,0,0,1,0,0);
          ctx.clearRect(0,0,picturePan.width,picturePan.height);
          ctx.restore();

          ctx.drawImage(panImage, -0.5 *  canvasWidth, -0.5 * canvasHeight, 2 *  canvasWidth, 2 * canvasHeight);

        }
        redraw();

      let lastX=picturePan.width/2, lastY=picturePan.height/2;

      let dragStart,dragged;

      picturePan.addEventListener('mousedown',function(evt){
          document.body.style.mozUserSelect = document.body.style.webkitUserSelect = document.body.style.userSelect = 'none';
          lastX = evt.offsetX || (evt.pageX - picturePan.offsetLeft);
          lastY = evt.offsetY || (evt.pageY - picturePan.offsetTop);
          dragStart = ctx.transformedPoint(lastX,lastY);
          dragged = false;
      },false);

      picturePan.addEventListener('mousemove',function(evt){
          lastX = evt.offsetX || (evt.pageX - picturePan.offsetLeft);
          lastY = evt.offsetY || (evt.pageY - picturePan.offsetTop);
          dragged = true;
          if (dragStart){
            let pt = ctx.transformedPoint(lastX,lastY);
            ctx.translate(pt.x-dragStart.x,pt.y-dragStart.y);
            redraw();
                }
      },false);

      picturePan.addEventListener('mouseup',function(evt){
          dragStart = null;
          if (!dragged) zoom(evt.shiftKey ? -1 : 1 );
      },false);

      let scaleFactor = 1.05;

      let zoom = function(clicks){
          let pt = ctx.transformedPoint(lastX,lastY);
          ctx.translate(pt.x,pt.y);
          let factor = Math.pow(scaleFactor,clicks);
          ctx.scale(factor,factor);
          ctx.translate(-pt.x,-pt.y);
          redraw();
      }

      let handleScroll = function(evt){
          let delta = evt.wheelDelta ? evt.wheelDelta/40 : evt.detail ? -evt.detail : 0;
          if (delta) zoom(delta);
          return evt.preventDefault() && false;
      };
    
      picturePan.addEventListener('DOMMouseScroll',handleScroll,false);
      picturePan.addEventListener('mousewheel',handleScroll,false);
	};

	panImage.src = '../img/cont/337.jpg';
	
	// Adds ctx.getTransform() - returns an SVGMatrix
	// Adds ctx.transformedPoint(x,y) - returns an SVGPoint
	function trackTransforms(ctx){
      let svg = document.createElementNS("http://www.w3.org/2000/svg",'svg');
      let xform = svg.createSVGMatrix();
      ctx.getTransform = function(){ return xform; };

      let savedTransforms = [];
      let save = ctx.save;
      ctx.save = function(){
          savedTransforms.push(xform.translate(0,0));
          return save.call(ctx);
      };
    
      let restore = ctx.restore;
      ctx.restore = function(){
        xform = savedTransforms.pop();
        return restore.call(ctx);
		      };

      let scale = ctx.scale;
      ctx.scale = function(sx,sy){
        xform = xform.scaleNonUniform(sx,sy);
        return scale.call(ctx,sx,sy);
		      };
    
      let rotate = ctx.rotate;
      ctx.rotate = function(radians){
          xform = xform.rotate(radians*180/Math.PI);
          return rotate.call(ctx,radians);
      };
    
      let translate = ctx.translate;
      ctx.translate = function(dx,dy){
          xform = xform.translate(dx,dy);
          return translate.call(ctx,dx,dy);
      };
    
      let transform = ctx.transform;
      ctx.transform = function(a,b,c,d,e,f){
          let m2 = svg.createSVGMatrix();
          m2.a=a; m2.b=b; m2.c=c; m2.d=d; m2.e=e; m2.f=f;
          xform = xform.multiply(m2);
          return transform.call(ctx,a,b,c,d,e,f);
      };
    
      let setTransform = ctx.setTransform;
      ctx.setTransform = function(a,b,c,d,e,f){
          xform.a = a;
          xform.b = b;
          xform.c = c;
          xform.d = d;
          xform.e = e;
          xform.f = f;
          return setTransform.call(ctx,a,b,c,d,e,f);
      };
    
      let pt  = svg.createSVGPoint();
      ctx.transformedPoint = function(x,y){
          pt.x=x; pt.y=y;
          return pt.matrixTransform(xform.inverse());
      }
	}    


/*glitchArt*/

function getRandom(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

var img = new Image();
img.src = '../img/cont/23.jpg';
img.onload = function() {
  draw(this);
};

function draw(img) {
  let glitchArt = document.querySelector('.glitch-art');
  var canvas = glitchArt.getContext('2d');
  glitchArt.setAttribute("width", img.width);
  glitchArt.setAttribute("height", img.height);
  var verticalSlices = Math.round(img.height / 30);
  var maxHorizOffset = 30;
  for (var i = 0; i < verticalSlices; i++)  {
    var horizOffset = getRandom(-Math.abs(maxHorizOffset), maxHorizOffset);
    canvas.drawImage(img, 0, i * verticalSlices, img.width, i * verticalSlices + verticalSlices, horizOffset, i * verticalSlices, img.width, i * verticalSlices + verticalSlices);
  }
}    

/* window effect on mousemove*/

let MAX_ROT = 30;
let ANIM_SPEED = 0.075;

let frame = void 0,
    card = void 0,
    perspectiveImg = void 0,
    mouse = void 0,
    userPos = void 0,
    hover = void 0,
    padding = void 0,
    center = void 0;


	frame = document.querySelector(".perspective-frame");
	card = document.querySelector(".perspective-card");
	perspectiveImg = document.querySelector(".perspective-img");
	mouse = [0, 0];
	hover = false;    

function lerp(n1, n2, speed) {
	return (1 - speed) * n1 + speed * n2;
}

Array.prototype.lerp = function (target, speed) {
	let _this = this;

	this.forEach(function (n, i) {
		return _this[i] = lerp(n, target[i], speed);
	});
};

function loop() {
	let xPosNorm = void 0,
	    yPosNorm = void 0,
	    mouseDistNorm = void 0,
	    theta = void 0,
	    xRot = void 0,
	    yRot = void 0,
	    imgX = void 0,
	    imgY = void 0;

	padding = [0.5 * (perspectiveImg.clientWidth - card.clientWidth), 0.5 * (perspectiveImg.clientHeight - card.clientHeight)];

let rect = card.getBoundingClientRect();
center = [0.5 * card.clientWidth + rect.left, 0.5 * card.clientHeight + rect.top];
userPos = [center[0], center[1]];      

	userPos.lerp(hover ? mouse : center, ANIM_SPEED);

	xPosNorm = (center[0] - userPos[0]) / center[0];
	yPosNorm = (center[1] - userPos[1]) / center[1];

	imgX = xPosNorm * padding[0];
	imgY = yPosNorm * padding[1];

	mouseDistNorm = Math.sqrt(xPosNorm * xPosNorm + yPosNorm * yPosNorm);
	theta = Math.atan2(userPos[1] - center[1], userPos[0] - center[0]);

	xRot = Math.sin(-theta) * MAX_ROT * mouseDistNorm; //card x-axis rotation based on mouse y-axis position
	yRot = Math.cos(theta) * MAX_ROT * mouseDistNorm;

	card.style.transform = `rotateX(${xRot * 5}deg) rotateY(${yRot  * 5}deg)`;
	perspectiveImg.style.transform = `translateX(${imgX  * 10}px) translateY(${imgY * 10}px)`;
	window.requestAnimationFrame(loop);
}



	frame.addEventListener("mousemove", function (e) {
		mouse[0] = e.clientX,
		mouse[1] = e.clientY;
		hover = true; 
	});

	frame.addEventListener("mouseleave", function () {
		hover = false;
	});
	loop();


</script>
</body>
</html>